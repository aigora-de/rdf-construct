# uml_layouts.yml
#
# PlantUML layout definitions for rdf-construct
# Control diagram direction, arrow orientation, spacing, and grouping
#
# New features:
# - linetype: Control edge routing (ortho, polyline, spline)
# - group_inheritance: Merge arrow heads when multiple subclasses
# - together: Group classes to be placed adjacent
# - layout_hints: Hidden links to influence positioning

defaults:
  layout: hierarchy  # Default layout to use
  show_arrows: true
  hide_empty_members: false

layouts:

  # ============================================
  # Hierarchy Layout: Top-down for class hierarchies
  # ============================================
  hierarchy:
    description: "Top-down layout with parents above children"
    direction: top_to_bottom
    arrow_direction: up  # Children point up to parents
    linetype: ortho
    group_inheritance: 3
    hide_empty_members: false
    show_arrows: true
    group_by_namespace: false
    spacing:
      nodesep: 40
      ranksep: 60

  # ============================================
  # Flat Layout: Left-to-right for network diagrams
  # ============================================
  flat:
    description: "Left-to-right layout for showing relationships"
    direction: left_to_right
    arrow_direction: right
    hide_empty_members: false
    show_arrows: true
    group_by_namespace: false
    spacing:
      nodesep: 30
      ranksep: 50

  # ============================================
  # Compact Layout: Minimal spacing, hide empty
  # ============================================
  compact:
    description: "Compact layout with minimal spacing"
    direction: top_to_bottom
    arrow_direction: up
    hide_empty_members: true  # Hide classes with no attributes
    show_arrows: true
    group_by_namespace: false
    group_inheritance: 3  # Merge arrows when 3+ subclasses
    spacing:
      nodesep: 20
      ranksep: 30
      padding: 5

  # ============================================
  # Documentation Layout: Grouped by namespace
  # ============================================
  documentation:
    description: "Documentation-friendly with namespace grouping"
    direction: top_to_bottom
    arrow_direction: up
    hide_empty_members: false
    show_arrows: true
    group_by_namespace: true  # Group classes by namespace prefix
    linetype: ortho  # Right-angle lines for cleaner look
    spacing:
      nodesep: 50
      ranksep: 70
      packageMargin: 15

  # ============================================
  # Presentation Layout: Large spacing for slides
  # ============================================
  presentation:
    description: "Large spacing suitable for presentations"
    direction: top_to_bottom
    arrow_direction: up
    hide_empty_members: false
    show_arrows: true
    group_by_namespace: false
    linetype: ortho
    group_inheritance: 2  # Merge arrows when 2+ subclasses
    spacing:
      nodesep: 60
      ranksep: 80
      padding: 15
      minClassWidth: 150
      sameClassWidth: true

  # ============================================
  # Orthogonal Layout: Right-angle connections
  # ============================================
  orthogonal:
    description: "Orthogonal (right-angle) line routing"
    direction: top_to_bottom
    arrow_direction: up
    hide_empty_members: false
    show_arrows: true
    linetype: ortho
    spacing:
      nodesep: 50
      ranksep: 60

  # ============================================
  # Polyline Layout: Straight line segments
  # ============================================
  polyline:
    description: "Polyline (straight segment) routing"
    direction: top_to_bottom
    arrow_direction: up
    hide_empty_members: false
    show_arrows: true
    linetype: polyline
    spacing:
      nodesep: 40
      ranksep: 50

  # ============================================
  # Reverse Hierarchy: NOT FULLY SUPPORTED
  # ============================================
  # Note: PlantUML does not reliably support 'bottom to top direction'.
  # This layout uses down arrows to hint at reversed hierarchy.
  reverse:
    description: "WORKAROUND - uses down arrows to hint at reversed layout"
    direction: top_to_bottom  # PlantUML doesn't support bottom_to_top
    arrow_direction: down     # Use down arrows to hint at reversed hierarchy
    hide_empty_members: false
    show_arrows: true
    group_by_namespace: false

  # ============================================
  # Network Layout: For showing object properties
  # ============================================
  network:
    description: "Network-style layout emphasizing relationships"
    direction: left_to_right
    arrow_direction: right
    hide_empty_members: true
    show_arrows: true
    group_by_namespace: false
    linetype: polyline
    spacing:
      nodesep: 30
      ranksep: 50

  # ============================================
  # IES Building Layout: Example with together groups
  # ============================================
  # This demonstrates using 'together' to group related classes
  # and 'layout_hints' to influence positioning
  ies_building:
    description: "Layout optimised for IES Building ontology"
    direction: top_to_bottom
    arrow_direction: up
    hide_empty_members: false
    show_arrows: true
    linetype: ortho
    group_inheritance: 3

    spacing:
      nodesep: 50
      ranksep: 70
      minClassWidth: 120

    # Group related classes together
    together:
      # Core building concepts should be adjacent
      - [building:Building, building:BuildingUnit, building:Envelope]
      # Metaclasses grouped
      - [building:ClassOfBuilding, building:ClassOfBuildingUnit, building:ClassOfEnvelope]
      # Space types grouped
      - [building:EnclosedSpace, building:OpenSpace, building:PartiallyEnclosedSpace]

    # Hidden links to influence positioning
    layout_hints:
      # IES foundation above building classes
      - from: ies:ArtificialFeature
        to: building:Building
        direction: down
        weight: 2
      - from: ies:ArtificialFeature
        to: building:Envelope
        direction: down
      # Metaclasses to the right of their instances
      - from: building:Building
        to: building:ClassOfBuilding
        direction: right

  # ============================================
  # Grouped Inheritance Layout
  # ============================================
  # Merges inheritance arrows when multiple subclasses
  grouped:
    description: "Merges inheritance arrows for cleaner hierarchies"
    direction: top_to_bottom
    arrow_direction: up
    hide_empty_members: false
    show_arrows: true
    group_inheritance: 2  # Merge when 2+ subclasses
    linetype: ortho
    spacing:
      nodesep: 40
      ranksep: 60


# ============================================
# Usage Examples
# ============================================
#
# 1. Basic hierarchy layout:
#    poetry run rdf-construct uml ontology.ttl -C contexts.yml \
#      --layout-config uml_layouts.yml --layout hierarchy
#
# 2. Presentation-ready with large spacing:
#    poetry run rdf-construct uml ontology.ttl -C contexts.yml \
#      --layout-config uml_layouts.yml --layout presentation
#
# 3. Compact for large diagrams:
#    poetry run rdf-construct uml ontology.ttl -C contexts.yml \
#      --layout-config uml_layouts.yml --layout compact
#
# 4. Orthogonal lines for documentation:
#    poetry run rdf-construct uml ontology.ttl -C contexts.yml \
#      --layout-config uml_layouts.yml --layout orthogonal
#
# 5. IES Building with custom grouping:
#    poetry run rdf-construct uml examples/ies-building.ttl examples/ies-common.ttl \
#      -C ies_building_contexts.yml \
#      --layout-config uml_layouts.yml --layout ies_building \
#      --style-config examples/ies_colour_palette.yml --style ies_full